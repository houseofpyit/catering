<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="invoice_prints">
            <t t-call="web.html_container">  
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                    <table width="100%" style="border:none;">
                                    <td width="10%" style="border:none;padding-right:200px;">
                                    </td>
                                    <td width="80%" style="border:none;">
                                    </td>
                                    <td width="10%" style="border:none;">
                                           <t t-if="o.company_id.logo">
                                            <img class="img img-responsive" t-att-src="image_data_uri(o.company_id.logo)" width="150" height="100"/>
                                        </t>
                                    </td>
                                </table>
                        <style>
                            table {
                                border: 1px solid black;
                                <!-- border-collapse: collapse; -->
                            }
                            td,th {
                                border: 1px solid black;
                            }
                        </style>
                        <div class="page">
                            <table>
                                <center>
                                    <h1><span t-esc="o.company_id.name"/></h1>
                                    <span t-esc="o.company_id.street"/><br/>
                                    <b><span>Email :</span></b>
                                    <b><span t-esc="o.company_id.email"/></b><br/>
                                    <b><span>Ph No. :</span></b>
                                    <b><span t-esc="o.company_id.phone"/></b>
                                </center>
                            </table> 
                            <table style="width:100%;">
                                <tr>
                                    <td style="width:20%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span>NAME</span>
                                    </td>
                                    <td style="width:30%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span t-esc="o.partner_id.name"/>
                                    </td>
                                    <td style="width:20%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span>INVOICE NO.</span>
                                    </td>
                                    <td style="width:30%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span t-esc="o.name"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width:20%;padding-top:3px;padding-bottom:15px;padding-left:4px;" rowspan="2">
                                        <span>ADDRESS</span>
                                    </td>
                                    <td style="width:30%;padding-top:3px;padding-bottom:15px;padding-left:4px;" rowspan="2">
                                        <span t-esc="o.partner_id.street"/>,
                                        <span t-esc="o.partner_id.city"/>,
                                        <br/>
                                        <span t-esc="o.partner_id.state_id.name"/>,
                                        <span t-esc="o.partner_id.country_id.name"/>
                                    </td>
                                    <td style="width:20%;padding-top:3px;padding-bottom:15px;padding-left:4px;">
                                        <span>INVOICE DATE.</span>
                                    </td>
                                    <td style="width:30%;padding-top:3px;padding-bottom:15px;padding-left:4px;">
                                        <span t-esc="o.invoice_date" t-options='{"widget": "date","format": "dd-MM-yyyy"}'/>
                                    </td>
                                </tr> 
                                <tr>
                                    <td style="width:20%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span>MOBILE NO</span>
                                    </td>
                                    <td style="width:30%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span t-esc="o.partner_id.phone"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width:20%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span>EMAIL ID</span>
                                    </td>
                                    <td style="width:30%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span t-esc="o.partner_id.email"></span>
                                    </td>
                                    <td style="width:20%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span>GST NO</span>
                                    </td>
                                    <td style="width:30%;padding-top:3px;padding-bottom:3px;padding-left:4px;">
                                        <span t-esc="o.partner_id.vat"></span>
                                    </td>
                                </tr>
                            </table> 
                            <table style="width:100%;margin-top:7px;border-left:none;border-right:none;">
                                <th style="text-align:center;padding:top:2px;border-left:none;border-right:none;"><h4>SALES</h4></th>
                            </table>
                            <table style="width:100%;margin-top:7px;border-bottom:none;">
                                <tr>
                                    <th style="width:15%;padding-top:3px;padding-bottom:3px;text-align:center;font-size:18px;background-color:#F4F0E0;">FUNCTION DATE</th>
                                    <th style="width:25%;padding-top:3px;padding-bottom:3px;text-align:center;font-size:18px;background-color:#F4F0E0;">PARTICULARS</th>
                                    <th style="width:18%;padding-top:3px;padding-bottom:3px;text-align:center;font-size:18px;background-color:#F4F0E0;">INSTRUCTION</th>
                                    <th style="width:12%;padding-top:3px;padding-bottom:3px;text-align:center;font-size:18px;background-color:#F4F0E0;">QUANTITY</th>
                                    <th style="width:10%;padding-top:3px;padding-bottom:3px;text-align:center;font-size:18px;background-color:#F4F0E0;">RATE</th>
                                    <th style="width:20%;padding-top:3px;padding-bottom:3px;text-align:center;font-size:18px;background-color:#F4F0E0;">AMOUNT</th>
                                </tr>
                                <t t-set="price" t-value="0" />
                                <t t-foreach="sorted(o.invoice_line_ids, key=lambda x: x.sequence)" t-as="i">
                                        <t t-set="price" t-value="price + i.price_subtotal" />
                                    <tr>
                                        <td style="padding-left:5px;">
                                            <span t-esc="i.fun_date" t-options='{"widget": "date","format": "dd-MM-yyyy"}'/>
                                        </td>
                                        <td style="padding-left:5px;">
                                            <span t-esc="i.product_id.name"/>
                                        </td>
                                        <td style="padding-left:5px;">
                                            <span t-esc="i.name"/>
                                        </td>
                                        <t t-if="i.purchase_id">
                                            <td style="text-align: right;padding-right:5px;">
                                                <span t-esc="'%.2f'%(sum(i.purchase_id.order_line.mapped('product_qty')))"/>
                                            </td>
                                        </t>
                                        <t t-else="">
                                            <td style="text-align: right;padding-right:5px;">
                                                <span t-esc="'%.2f'%(i.quantity)"/>
                                            </td>
                                        </t>
                                        <td style="text-align: right;padding-right:5px;">
                                            <span t-esc="'%.2f'%(i.price_unit)"/>
                                        </td>
                                        <td style="text-align: right;padding-right:5px;">
                                            <span t-esc="'%.2f'%(i.price_subtotal)"/>
                                        </td>
                                    </tr>
                                </t>
                                <table style="width:100%;border:none;">
                                    <tr>
                                        <td style="border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="text-align: right;border-left:none;border-top:none;padding-right:5px;width:80%;">
                                            <span>TOTAL</span>
                                        </td>
                                        <td style="text-align: right;padding-right:5px;width:20%;border-top:none;">
                                            <span t-esc="'%.2f'%(price)"/>
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%;border:none;">
                                    <t t-if="o.get_gst_amount().get('sgst')">
                                        <tr>
                                            <td style="border-right:none;"></td>
                                            <td style="border-left:none;border-right:none;"></td>
                                            <td style="border-left:none;border-right:none;"></td>
                                            <td style="text-align: right;border-left:none;padding-right:5px;width:80%;border-top:none;">
                                                <span>SGST</span>
                                            </td>
                                            <td style="text-align: right;padding-right:5px;width:20%;border-top:none;">
                                                <span t-esc="'%.2f'%(o.get_gst_amount().get('sgst'))"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-if="o.get_gst_amount().get('cgst')">
                                        <tr>
                                            <td style="border-right:none;"></td>
                                            <td style="border-left:none;border-right:none;"></td>
                                            <td style="border-left:none;border-right:none;"></td>
                                            <td style="text-align: right;border-left:none;padding-right:5px;width:80%;border-top:none;">
                                                <span>CGST</span>
                                            </td>
                                            <td style="text-align: right;padding-right:5px;width:20%;border-top:none;">
                                                <span t-esc="'%.2f'%(o.get_gst_amount().get('cgst'))"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-if="o.get_gst_amount().get('igst')">
                                        <tr>
                                            <td style="border-right:none;"></td>
                                            <td style="border-left:none;border-right:none;"></td>
                                            <td style="border-left:none;border-right:none;"></td>   
                                            <td style="text-align: right;border-left:none;padding-right:5px;">
                                                <span>IGST</span>
                                            </td>
                                            <td style="text-align: right;padding-right:5px;width:20%;border-top:none;">
                                                <span t-esc="'%.2f'%(o.get_gst_amount().get('igst'))"/>
                                            </td>
                                        </tr>
                                     </t>
                                    <tr>
                                        <td style="border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="text-align: right;border-left:none;padding-right:5px;width:80%;border-top:none;">
                                            <span>DISCOUNT</span>
                                        </td>
                                        <td style="text-align: right;padding-right:5px;width:20%;border-top:none;">
                                            <span t-esc="'%.2f'%(o.get_amount('discount'))"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="text-align: right;border-left:none;padding-right:5px;width:80%;">
                                            <span>ADVANCE PAYMENT</span>
                                        </td>
                                        <td style="text-align: right;padding-right:5px;width:20%;">
                                            <span t-esc="'%.2f'%(o.get_amount('advance'))"/>
                                        </td>
                                    </tr>
                                    <!-- <tr>
                                        <td style="border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="text-align: right;border-left:none;padding-right:5px;width:80%;">
                                            <span>ROUND OFF</span>
                                        </td>
                                        <td style="text-align: right;padding-right:5px;width:20%;">
                                            <span t-esc="o.amount_residual"/>
                                        </td>
                                    </tr> -->
                                    <tr style="background-color:#F4F0E0;border:none;">
                                        <td style="border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="text-align: right;border-left:none;padding-right:5px;width:80%;">
                                            <span>FINAL TOTAL</span>
                                        </td>
                                        <td style="text-align: right;padding-right:5px;width:15%;">
                                            <span t-esc="'%.2f'%(price + o.get_gst_amount().get('sgst',0) + o.get_gst_amount().get('cgst',0) + o.get_gst_amount().get('igst',0) - o.get_amount('discount') - o.get_amount('advance'))"/>
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%;border:none;border-right:1px solid black;">
                                    <tr style="background-color:#F4F0E0;">
                                        <td style="width:30%;padding-left:100px;">
                                            <span>AMOUNT IN WORDS</span>
                                        </td>
                                        <td style="width:70%;border-right:none;padding-left:5px;">
                                            <span t-esc="o.amount_to_text('%.2f'% (price + o.get_gst_amount().get('sgst',0) + o.get_gst_amount().get('cgst',0) + o.get_gst_amount().get('igst',0) - o.get_amount('discount') - o.get_amount('advance')), 'INR')"/>
                                        </td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                        <td style="border-left:none;border-right:none;"></td>
                                    </tr>
                                </table>
                                <table style="width:50%;border:none;margin-top:10px;">
                                    <tr>
                                        <td style="border:none;">
                                            <span>REMARK</span>
                                        </td>
                                        <td style="border:none;padding-left:2px;">:
                                            <span t-esc="o.narration"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border:none;">
                                            <span>COMPANY'S GST NO</span>
                                        </td>
                                        <td style="border:none;padding-left:2px;">:
                                            <span t-esc="o.partner_id.vat"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border:none;">
                                            <span>SERVICE TAX NO</span>
                                        </td>
                                        <td style="border:none;padding-left:2px;">:
                                            <!-- <span t-esc="o.partner_id.vat"/> -->
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border:none;">
                                            <span>SCOMPANY'S PAN NO</span>
                                        </td>
                                        <td style="border:none;padding-left:2px;">:
                                            <span t-esc="o.company_id.pan_no"/>
                                        </td>
                                    </tr>
                                </table>
                                <table style="border:none;width:100%;margin-top:5px;">
                                    <tr>
                                        <td style="border:none;">
                                            <span>Taxes as applicable on the date of function Payment in favour of </span><span t-esc="o.company_id.name"/><br/>
                                            <span>Subject to the Terms And Conditions,Rules And Regulation as specified</span>
                                        </td>
                                    </tr>
                                </table>
                            </table>
                        </div>
                        <div class="footer">
                            <table style="width:100%;border-right:none;border-left:none;border-bottom:none;border-top:none;">
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td style="text-align: right;padding-bottom: 20px;">
                                        <center><span t-esc="o.company_id.name"/></center>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width:30%;border: 1px solid black;border-right:none;border-left:none;border-bottom:none;">
                                        <center>Manager's Signature</center>
                                    </td>
                                    <td style="width:5%;border: 1px solid black;border-right:none;border-left:none;border-bottom:none;border-top:none;"></td>
                                    <td style="width:30%;border: 1px solid black;border-right:none;border-left:none;border-bottom:none;">
                                        <center>Customer's Signature</center>
                                    </td>
                                    <td style="width:5%;border: 1px solid black;border-right:none;border-left:none;border-bottom:none;border-top:none;"></td>
                                    <td style="width:30%;border: 1px solid black;border-right:none;border-left:none;border-bottom:none;">
                                        <center>Authorised Signatory</center>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </t>
                </t>  
            </t>
        </template>
    </data>
</odoo>