<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="hop_recipes_view_form" model="ir.ui.view">
        <field name="name">hop.recipes.view.form</field>
        <field name="model">hop.recipes</field>
        <field name="arch" type="xml">
            <form string="Recipes Category">
                <sheet>
                    <field name="product_img" widget="image" class="oe_avatar"/>
                        <div class="oe_title">
                            <h1>    
                                <field name="name" placeholder="Enter Name" required="True"/>
                            </h1>
                        </div>
                    <group>
                        <group>
                            <field name="is_recipe"  invisible="1" />
                            <field name="recipe"  invisible="1" />
                            <field name="product_id" groups="base.group_no_one"/>
                            <field name="convert_name" />
                            <field name="gujarati" force_save="1"/>
                            <field name="hindi" force_save="1"/>
                            <field name="category_id" required="True" options="{'no_quick_create':true}"/>
                            <field name="rate" required="True"/>
                            <field name="cost"/>
                            <field name="accomplishment"/> 
                            <field name="create_raw_material" invisible="1"/>
                        </group>
                        <group>
                            <!-- <span class="d-inline-block">
                                <field name="qty"/>
                                <label for="qty"/>
                            </span>
                            <span class="d-inline-block">
                                <field name="uom"/>
                                <label for="uom"/>
                            </span> -->
                            <span class="o_form_label o_td_label" name="order no">
                                <b>Quantity</b>
                            </span>
                            <div class="o_address_format">
                                <field name="qty" class="o_address_city" style="width:20%;" force_save="1" required="True"/>
                                <field name="uom" class="o_address_city" style="width:35%;" force_save="1" required="True" options="{'no_quick_create':true}"/>
                            </div>
                            <field name="description" />
                            <!-- <field name="uom" />  -->
                            <field name="jobwork_type" />
                            <field name="vender_id" attrs="{'invisible': [('jobwork_type', '=', False)]}"/>
                        </group>
                    </group>
                    <group string="Outsider Agencies" invisible="1">
                        <div>
                            <field name="agencies_ids" nolabel="1"  widget="one2many_list" tracking="1" invisible="1">
                                <tree editable="bottom">
                                    <field name="agencies_outsider_id" width="20" />
                                    <field name="agencies_rate" sum="agencies_rate" width="20" />    
                                </tree>
                            </field>    
                        </div>
                    </group>

                    <button type="object"
                    name="with_without_update"
                    string="With Without Update"
                    class="btn btn-sm btn-info" invisible="1"/>

                    <button type="action"
                            name="%(action_hop_add_raw_material)d"
                            string="Add Materials"
                            class="btn btn-sm btn-info"/>

                    <button name="update_product_uom" string="Update Recipes Product Uom" type="object" class="btn btn-sm btn-info" invisible="1"/>
                    <button name="update_uom" string="Update Uom" type="object" class="btn btn-sm btn-info" invisible="1"/>
                    <group string="Raw Materials">
                        <div>
                            <field name="raw_materials_ids" nolabel="1"  tracking="1">
                                <tree editable="bottom">
                                    <field name="item_id" options="{'no_quick_create':true}" required="True" tracking="1" context="{'default_utility_type':'raw_materials','default_detailed_type':'product','form_view_ref':'product.product_template_only_form_view'}" width="20" />
                                    <field name="uom" width="20" tracking="1" options="{'no_quick_create':true}"/>    
                                    <field name="weight"  sum="weight" width="20" tracking="1"/>    
                                    <field name="item_cost" width="20" tracking="1" />    
                                    <field name="price" sum="price" width="20" tracking="1" />    
                                </tree>
                                <kanban class="o_kanban_mobile">
                                    <field name="item_id"/>
                                    <field name="uom" options="{'no_quick_create':true}"/>    
                                    <field name="weight"/>    
                                    <field name="item_cost" />    
                                    <field name="price"/> 
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div t-attf-class="oe_kanban_card oe_kanban_global_click ">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <strong>
                                                            <span>
                                                                    Item name:
                                                                <t t-esc="record.item_id.value"/>
                                                            </span>
                                                        </strong>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 text-muted">
                                                        <span>
                                                                Uom:
                                                            <t t-esc="record.uom.value"/>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 text-muted">
                                                        <span>
                                                                Quantity:
                                                            <t t-esc="record.weight.value"/>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 text-muted">
                                                        <span>
                                                                Item Cost:
                                                            <t t-esc="record.item_cost.value"/>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 text-muted">
                                                        <span>
                                                                Price:
                                                            <t t-esc="record.price.value"/>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates> 
                                </kanban>
                                <form>
                                    <field name="item_id"  options="{'no_quick_create':true}" required="1" tracking="1" context="{'default_utility_type':'raw_materials','default_detailed_type':'product','form_view_ref':'product.product_template_only_form_view'}" width="20" />
                                    <field name="uom" width="20" tracking="1" options="{'no_quick_create':true}"/>    
                                    <field name="weight"  sum="weight" width="20" tracking="1"/>    
                                    <field name="item_cost" width="20" tracking="1" />    
                                    <field name="price" sum="price" width="20" tracking="1" />  
                                </form>
                            </field>
                        </div>
                    </group>        
                    <group>
                        <field name="remarks"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="view_hop_recipes_filter" model="ir.ui.view">
        <field name="name">hop.recipes.search</field>
        <field name="model">hop.recipes</field>
        <field name="arch" type="xml">
            <search string="Search Recipes Category">
                <field name="name" string="Search name" filter_domain="[
                    ('name', 'ilike', self)]"/>
                    <field name="name" string="Search Category" filter_domain="[
                    ('category_id.name', 'ilike', self)]"/>
                    <filter string="With Recipe" name="is_recipe" domain="[('is_recipe', '=', True)]"/>
                    <filter string="Without Recipe" name="not_recipe" domain="[('is_recipe', '=', False)]"/>
                    <filter string="Archived" name="active" domain="[('active', '=', False)]"/>
                <group expand="0" string="Group By">
                    <filter string="category" name="group_by_category_id" context="{'group_by': 'category_id'}"/>
                    <filter string="Uom" name="group_by_uom" context="{'group_by': 'uom'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="hop_recipes_kandan" model="ir.ui.view">
            <field name="name">Recipes</field>
            <field name="model">hop.recipes</field>
            <field name="arch" type="xml">
                <kanban >
                    <field name="id" />
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_details oe_kanban_global_click o_kanban_record_has_image_fill">                                
                                <div class="o_kanban_image">
                                    <img alt="Avatar" t-att-src="kanban_image('hop.recipes', 'product_img',record.id.raw_value)"/>
                                </div>
                                <div class="oe_kanban_details">
                                    <strong class="o_kanban_record_title">
                                        <b><field name="name"/></b>
                                    </strong>
                                    <ul>
                                        <li>Uom: <b><field name="uom"></field></b></li>
                                        <li>Vendor Rate: <b><field name="rate"></field></b></li>
                                        <li>Per UOM Cost Rate: <b><field name="cost"></field></b></li>
                                    </ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

    <record id="hop_recipes_view_tree" model="ir.ui.view">
        <field name="name">hop.recipes.view.tree</field>
        <field name="model">hop.recipes</field>
        <field name="arch" type="xml">
            <tree string="Recipes">
                <field name="name" />
                <!-- <field name="agencies_insider_id" context="{'default_is_vender': True}"/> -->
                <field name="category_id" />
                <field name="qty"/>
            </tree>
        </field>
    </record>

    <record id="hop_recipes_action" model="ir.actions.act_window">
        <field name="name">Recipes</field>
        <field name="res_model">hop.recipes</field>
        <field name="view_mode">kanban,tree,form</field>
    </record>


    <!-- For Receip Line Import  -->
    <record id="hop_raw_materials_view_tree" model="ir.ui.view">
        <field name="name">hop.raw.materials.view.tree</field>
        <field name="model">hop.raw.materials</field>
        <field name="arch" type="xml">
            <tree string="Recipes">
                <field name="item_id" />
                <field name="uom" />    
                <field name="weight" />    
                <field name="item_cost" />    
                <field name="price" />    
            </tree>
        </field>
    </record>

    <record id="hop_raw_materials_action" model="ir.actions.act_window">
        <field name="name">Recipes Raw Material</field>
        <field name="res_model">hop.raw.materials</field>
        <field name="view_mode">tree</field>
    </record>
</odoo>
